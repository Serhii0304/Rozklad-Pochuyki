<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    <title>4 –∫–ª–∞—Å | –ü–æ—á—É–π–∫—ñ–≤—Å—å–∫–∞ —Ñ—ñ–ª—ñ—è –ö–≤—ñ—Ç–Ω–µ–≤–æ–≥–æ –ª—ñ—Ü–µ—é</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Rubik:wght@500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #f3f8f8;
        --bg-soft: #f8fcff;
        --card: #ffffff;
        --ink: #13232d;
        --muted: #4a6472;
        --line: rgba(19, 35, 45, 0.12);
        --brand: #0f8f8c;
        --brand-strong: #0d6f74;
        --glow: 0 20px 45px rgba(13, 111, 116, 0.16);
        --radius-xl: 26px;
        --radius-lg: 18px;
      }

      
      * { box-sizing: border-box; margin: 0; padding: 0; }

      html {
        height: 100%;
        scroll-behavior: smooth;
        overflow-x: auto;
        overflow-y: auto;
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
      }

      body {
        height: 100%;
        min-height: 100vh;
        font-family: "Manrope", sans-serif;
        color: var(--ink);
        background: linear-gradient(160deg, var(--bg) 0%, var(--bg-soft) 62%, #eef8f4 100%);
        overflow-x: auto;
        overflow-y: auto;
        touch-action: pan-x pan-y pinch-zoom;
      }

      
      .site-bg {
        position: fixed;
        inset: 0;
        z-index: 0;
        background:
          linear-gradient(165deg, rgba(243, 248, 248, 0.56) 0%, rgba(248, 252, 255, 0.48) 52%, rgba(238, 248, 244, 0.54) 100%),
          radial-gradient(circle at 84% 14%, rgba(255, 209, 128, 0.14), transparent 28%),
          radial-gradient(circle at 10% 16%, rgba(15, 143, 140, 0.12), transparent 28%),
          url('./–ó–∞—Å—Ç–∞–≤–∫–∞.png') center / cover no-repeat;
        pointer-events: none;
      }

      .print-bg-image {
        display: none;
      }

      .app {
        position: relative;
        z-index: 1;
        width: min(1280px, calc(100% - 24px));
        margin: 20px auto 40px;
      }

      .hero {
        border-radius: var(--radius-xl);
        background:
          linear-gradient(120deg, rgba(15, 143, 140, 0.15) 0%, rgba(217, 245, 255, 0.75) 55%, rgba(255, 209, 128, 0.36) 100%),
          var(--card);
        box-shadow: var(--glow);
        padding: 30px 24px;
        text-align: center;
      }

      .hero__school {
        display: inline-flex;
        align-items: center;
        padding: 8px 14px;
        border-radius: 999px;
        border: 1px solid rgba(15, 143, 140, 0.26);
        background: rgba(255, 255, 255, 0.82);
        font-weight: 800;
        font-size: 14px;
      }

      h1 {
        margin-top: 10px;
        font-family: "Rubik", sans-serif;
        font-size: clamp(28px, 3.2vw, 44px);
        line-height: 1.16;
      }

      .hero__links,
      .class-nav {
        margin-top: 12px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .hero__links a,
      .class-tab {
        text-decoration: none;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(15, 143, 140, 0.26);
        background: rgba(255, 255, 255, 0.9);
        color: #134f66;
        font-weight: 800;
      }

      .class-tab.is-active {
        color: #ffffff;
        border-color: transparent;
        background: linear-gradient(120deg, var(--brand) 0%, var(--brand-strong) 100%);
      }

      .panel {
        margin-top: 16px;
        border-radius: var(--radius-lg);
        border: 1px solid var(--line);
        background: var(--card);
        box-shadow: 0 12px 26px rgba(19, 35, 45, 0.08);
        padding: 16px;
      }

      .panel h2 {
        font-family: "Rubik", sans-serif;
        font-size: 20px;
      }

      .controls {
        margin-top: 10px;
        display: grid;
        gap: 10px;
        grid-template-columns: repeat(3, minmax(160px, 1fr));
      }

      label {
        display: grid;
        gap: 6px;
        color: var(--muted);
        font-weight: 700;
      }

      select,
      button {
        min-height: 42px;
        padding: 8px 10px;
        border-radius: 12px;
        border: 1px solid rgba(19, 35, 45, 0.2);
        background: #fff;
        font: inherit;
      }

      button {
        border: 0;
        color: #fff;
        font-weight: 800;
        cursor: pointer;
        background: linear-gradient(120deg, var(--brand) 0%, var(--brand-strong) 100%);
      }

      .table-wrap {
        margin-top: 12px;
        overflow-x: auto;
        overflow-y: auto;
        max-width: 100%;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: auto;
        touch-action: pan-x pan-y pinch-zoom;
      }

      table {
        width: max-content;
        min-width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        border-bottom: 1px solid rgba(19, 35, 45, 0.2);
        border-right: 1px solid rgba(19, 35, 45, 0.12);
        padding: 10px 9px;
        text-align: center;
        vertical-align: middle;
      }

      th:last-child,
      td:last-child { border-right: 0; }

      thead th {
        position: sticky;
        top: 0;
        z-index: 1;
        color: #f4fcff;
        font-weight: 800;
        background: linear-gradient(140deg, #133b53 0%, #0c4f68 55%, #0b6a75 100%);
      }

      thead th:first-child,
      tbody th {
        width: 40px;
        min-width: 40px;
        max-width: 40px;
        padding-left: 4px;
        padding-right: 4px;
      }

      tbody th {
        background: #edf4f9;
        font-weight: 800;
        color: var(--ink);
      }

      td {
        background: #f9fcff;
        color: var(--ink);
      }

      tbody td[data-day="–ü–æ–Ω–µ–¥—ñ–ª–æ–∫"] { background: #fff6d8; }
      tbody td[data-day="–í—ñ–≤—Ç–æ—Ä–æ–∫"] { background: #e8f4ff; }
      tbody td[data-day="–°–µ—Ä–µ–¥–∞"] { background: #f1eaff; }
      tbody td[data-day="–ß–µ—Ç–≤–µ—Ä"] { background: #e9fff2; }
      tbody td[data-day="–ü'—è—Ç–Ω–∏—Ü—è"] { background: #ffeef6; }


            .subject-stack {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        flex-wrap: nowrap;
        white-space: nowrap;
        width: 100%;
      }

      .subject-chip {
        border: 1px solid rgba(15, 143, 140, 0.24);
        background: #f7ffff;
        border-radius: 999px;
        padding: 7px 12px;
        display: inline-flex;
        align-items: center;
        gap: 9px;
        font-size: 20px;
        font-weight: 700;
        line-height: 1.12;
        color: var(--ink);
        white-space: nowrap;
        cursor: pointer;
      }

      .subject-chip span:first-child {
        font-size: 1.56em;
        line-height: 1;
      }

      .subject-chip span:last-child {
        color: var(--ink);
        white-space: nowrap;
      }

      .subject-chip:hover {
        border-color: var(--brand);
        background: #ebfffe;
      }

      .subject-chip.is-active {
        color: #f3fbff;
        background: #0c4f68;
        border-color: rgba(255, 255, 255, 0.4);
      }

      .subject-chip.is-active span:last-child { color: #f3fbff; }

      td.is-match {
        color: #f3fbff;
        background: #0f6077;
      }

      td.is-match .subject-chip {
        color: #f3fbff;
        background: #0c4f68;
        border-color: rgba(255, 255, 255, 0.35);
      }

      td.is-match .subject-chip span:last-child { color: #f3fbff; }

      td.is-dim { opacity: 0.34; }

      .divider {
        color: #5f7380;
        font-weight: 700;
      }

      .empty { color: #7f8f99; }

      .footer {
        margin-top: 10px;
        text-align: center;
        color: var(--muted);
        font-weight: 600;
      }

      @media (max-width: 920px) {
        .controls { grid-template-columns: 1fr; }
        .app { width: min(1280px, calc(100% - 10px)); margin-top: 10px; }
      }

      
      @media (max-width: 760px) {
        .app {
          width: min(1280px, calc(100% - 8px));
          margin: 8px auto 22px;
        }

        .hero {
          padding: 18px 12px;
        }

        h1 {
          font-size: clamp(24px, 7.2vw, 34px);
        }

        .panel {
          padding: 10px;
        }

        .controls {
          gap: 8px;
        }

        .table-wrap {
          max-height: min(72vh, 560px);
        }

        th,
        td {
          padding: 9px 6px;
        }

        thead th {
          font-size: clamp(14px, 3.8vw, 19px);
        }

        tbody th {
          font-size: clamp(14px, 3.6vw, 18px);
        }

        .subject-stack {
          gap: 7px;
        }

        .subject-chip {
          font-size: clamp(14px, 3.7vw, 19px);
          padding: 6px 10px;
          gap: 7px;
          max-width: 100%;
        }

        .subject-chip span:first-child {
          font-size: 1.38em;
        }
      }
@media print {
        @page {
          size: A4 landscape;
          margin: 4mm;
        }

        html,
        body {
          width: 100%;
          height: auto;
          background: #ffffff !important;
          -webkit-print-color-adjust: exact;
          print-color-adjust: exact;
        }


        .hero__links,
        .class-nav,
        .controls,
        .footer {
          display: none !important;
        }
        .site-bg {
          display: none !important;
        }

        .print-bg-image {
          display: block !important;
          position: fixed !important;
          inset: 0 !important;
          width: 100vw !important;
          height: 100vh !important;
          object-fit: cover !important;
          opacity: 0.24 !important;
          z-index: 0 !important;
        }

        .app {
          width: 100% !important;
          margin: 0 !important;
          position: relative;
          z-index: 2;
        }

        .hero {
          padding: 0 0 2.5mm !important;
          margin: 0 !important;
          border: 0 !important;
          box-shadow: none !important;
          background: transparent !important;
        }

        .hero__school {
          border: 0 !important;
          background: transparent !important;
          padding: 0 !important;
          font-size: 11px !important;
          color: #0f1e25 !important;
          font-weight: 800 !important;
        }

        h1 {
          margin-top: 1.4mm !important;
          font-size: 21px !important;
          line-height: 1.02 !important;
          color: #0f1e25 !important;
        }

        .panel {
          margin: 0 !important;
          padding: 0 !important;
          border: 0 !important;
          box-shadow: none !important;
          background: transparent !important;
        }

        .panel h2 {
          display: none !important;
        }

        .table-wrap {
          margin: 0 !important;
          overflow: visible !important;
        }

        table {
          min-width: 0 !important;
          width: 100% !important;
          table-layout: fixed;
          border-collapse: collapse;
          background: rgba(255, 255, 255, 0.78) !important;
        }

        th,
        td {
          padding: 6px 5px !important;
          font-size: 18px !important;
          line-height: 1.0 !important;
          border-bottom: 1px solid #223744 !important;
          border-right: 1px solid #223744 !important;
          color: #0f1e25 !important;
          white-space: nowrap !important;
        }

        th:last-child,
        td:last-child { border-right: 0 !important; }

        thead th {
          position: static !important;
          background: linear-gradient(140deg, #133b53 0%, #0c4f68 55%, #0b6a75 100%) !important;
          color: #f4fcff !important;
          font-size: 28px !important;
          font-weight: 800 !important;
          white-space: nowrap !important;
        }

        thead th:first-child,
        tbody th {
          width: 3.7% !important;
          min-width: 0 !important;
          max-width: none !important;
          background: rgba(255, 255, 255, 0.9) !important;
          color: #0f1e25 !important;
        }

        thead th:not(:first-child),
        tbody td {
          width: 19.26% !important;
        }

        tbody td[data-day="–ü–æ–Ω–µ–¥—ñ–ª–æ–∫"] { background: rgba(255, 246, 216, 0.92) !important; }
        tbody td[data-day="–í—ñ–≤—Ç–æ—Ä–æ–∫"] { background: rgba(232, 244, 255, 0.92) !important; }
        tbody td[data-day="–°–µ—Ä–µ–¥–∞"] { background: rgba(241, 234, 255, 0.92) !important; }
        tbody td[data-day="–ß–µ—Ç–≤–µ—Ä"] { background: rgba(233, 255, 242, 0.92) !important; }
        tbody td[data-day="–ü'—è—Ç–Ω–∏—Ü—è"] { background: rgba(255, 238, 246, 0.92) !important; }

        .subject-stack {
          gap: 4px !important;
          flex-wrap: nowrap !important;
          white-space: nowrap !important;
          justify-content: center !important;
        }

        .subject-chip {
          border: 0 !important;
          border-radius: 0 !important;
          background: transparent !important;
          color: #0f1e25 !important;
          box-shadow: none !important;
          display: inline-flex !important;
          align-items: center !important;
          gap: 3px !important;
          padding: 0 !important;
          font-size: 24px !important;
          line-height: 1.0 !important;
          white-space: nowrap !important;
        }

        .subject-chip span:first-child {
          font-size: 34px !important;
          line-height: 1 !important;
        }

        .subject-chip span:last-child {
          color: #0f1e25 !important;
          white-space: nowrap !important;
        }

        .divider {
          color: #415762 !important;
          font-size: 14px !important;
          white-space: nowrap !important;
        }

        .empty {
          color: #435965 !important;
          white-space: nowrap !important;
        }

        td.is-match,
        td.is-dim {
          opacity: 1 !important;
          color: #0f1e25 !important;
        }

        tr,
        table,
        .panel,
        .table-wrap {
          page-break-inside: avoid;
          break-inside: avoid;
        }
      }
    </style>
  </head>
  <body>
    <div class="site-bg" aria-hidden="true"></div>
    <img class="print-bg-image" src="./–ó–∞—Å—Ç–∞–≤–∫–∞.png" alt="" aria-hidden="true" />
    <div class="app">
      <header class="hero">
        <p class="hero__school">–ü–æ—á—É–π–∫—ñ–≤—Å—å–∫–∞ —Ñ—ñ–ª—ñ—è –ö–≤—ñ—Ç–Ω–µ–≤–æ–≥–æ –ª—ñ—Ü–µ—é</p>
        <h1>4 –∫–ª–∞—Å</h1>

        <div class="hero__links">
          <a href="index.html">–ì–æ–ª–æ–≤–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥</a>
          <a href="#week">–¢–∏–∂–Ω–µ–≤–∏–π —Ä–æ–∑–∫–ª–∞–¥</a>
        </div>

        <nav class="class-nav" aria-label="–ü–µ—Ä–µ—Ö—ñ–¥ –º—ñ–∂ –∫–ª–∞—Å–∞–º–∏">
          <a class="class-tab" href="class-1.html">1 –∫–ª–∞—Å</a><a class="class-tab" href="class-2.html">2 –∫–ª–∞—Å</a><a class="class-tab" href="class-3.html">3 –∫–ª–∞—Å</a><a class="class-tab is-active" href="class-4.html">4 –∫–ª–∞—Å</a><a class="class-tab" href="class-5.html">5 –∫–ª–∞—Å</a><a class="class-tab" href="class-6.html">6 –∫–ª–∞—Å</a><a class="class-tab" href="class-7.html">7 –∫–ª–∞—Å</a><a class="class-tab" href="class-8.html">8 –∫–ª–∞—Å</a><a class="class-tab" href="class-9.html">9 –∫–ª–∞—Å</a>
        </nav>
      </header>

      <section class="panel" id="week">
        <h2>–†–æ–∑–∫–ª–∞–¥ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å</h2>

        <div class="controls">
          <label>
            –ü—Ä–µ–¥–º–µ—Ç
            <select id="subjectSearch">
              <option value="">–£—Å—ñ –ø—Ä–µ–¥–º–µ—Ç–∏</option>
            </select>
          </label>

          <label>
            –î–µ–Ω—å
            <select id="daySearch">
              <option value="">–£—Å—ñ –¥–Ω—ñ</option>
            </select>
          </label>

          <label>
            –î—Ä—É–∫
            <button id="printButton" type="button">–î—Ä—É–∫—É–≤–∞—Ç–∏</button>
          </label>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr id="headRow"></tr>
            </thead>
            <tbody id="bodyRows"></tbody>
          </table>
        </div>
      </section>

      <footer class="footer">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç, —â–æ–± –ø—ñ–¥—Å–≤—ñ—Ç–∏—Ç–∏ –π–æ–≥–æ —É –≤—Å—å–æ–º—É —Ç–∏–∂–Ω—ñ.</footer>
    </div>

    <script>
      const dayOrder = [{"id": "monday", "label": "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫"}, {"id": "tuesday", "label": "–í—ñ–≤—Ç–æ—Ä–æ–∫"}, {"id": "wednesday", "label": "–°–µ—Ä–µ–¥–∞"}, {"id": "thursday", "label": "–ß–µ—Ç–≤–µ—Ä"}, {"id": "friday", "label": "–ü'—è—Ç–Ω–∏—Ü—è"}];
      const lessons = [1, 2, 3, 4, 5, 6, 7];
      const tableData = {"–ü–æ–Ω–µ–¥—ñ–ª–æ–∫": {"1": "–õ—ñ—Ç —á–∏—Ç", "2": "–ú–∞—Ç–µ–º", "3": "–§—ñ–∑-—Ä–∞", "4": "", "5": "", "6": "", "7": ""}, "–í—ñ–≤—Ç–æ—Ä–æ–∫": {"1": "–£–∫—Ä –º–æ–≤–∞", "2": "–ú–∞—Ç–µ–º", "3": "–ú–∏—Å—Ç–µ—Ü—Ç–≤–æ", "4": "", "5": "", "6": "", "7": ""}, "–°–µ—Ä–µ–¥–∞": {"1": "–õ—ñ—Ç —á–∏—Ç", "2": "–£–∫—Ä –º–æ–≤–∞", "3": "–Ø–î–°", "4": "", "5": "", "6": "", "7": ""}, "–ß–µ—Ç–≤–µ—Ä": {"1": "–õ—ñ—Ç —á–∏—Ç", "2": "–§—ñ–∑-—Ä–∞", "3": "–£–∫—Ä –º–æ–≤–∞", "4": "", "5": "", "6": "", "7": ""}, "–ü'—è—Ç–Ω–∏—Ü—è": {"1": "–£–∫—Ä –º–æ–≤–∞", "2": "–ú–∞—Ç–µ–º", "3": "–ê–Ω–≥–ª –º–æ–≤–∞", "4": "", "5": "", "6": "", "7": ""}};
      const subjectIcons = {"–Ü–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞": "üíª", "–Ü—Å—Ç —Ä—ñ–¥–Ω –∫—Ä–∞—é": "üè°", "–Ü—Å—Ç–æ—Ä—ñ—è": "üè∫", "–Ü—Å—Ç–æ—Ä—ñ—è –£–∫—Ä": "‚öîÔ∏è", "–ê–ª–≥–µ–±—Ä–∞": "üìâ", "–ê–Ω–≥–ª –º–æ–≤–∞": "üá¨üáß", "–ë—É–∫–≤–∞—Ä": "üÖ∞Ô∏è", "–ë—ñ–æ–ª–æ–≥—ñ—è": "üß¨", "–í—Å–µ—Å–≤ —ñ—Å—Ç": "üåç", "–ì–µ–æ–≥—Ä–∞—Ñ—ñ—è": "üß≠", "–ì–µ–æ–º–µ—Ç—Ä—ñ—è": "üìê", "–ì—Ä–æ–º –æ—Å–≤": "‚öñÔ∏è", "–ó–∞—Ä –ª—ñ—Ç": "üìú", "–õ—ñ—Ç —á–∏—Ç": "üìñ", "–ú–∞—Ç–µ–º": "üî¢", "–ú–∏—Å—Ç–µ—Ü—Ç–≤–æ": "üé®", "–ú—É–∑–∏–∫–∞": "üéµ", "–ù—ñ–º –º–æ–≤–∞": "üá©üá™", "–û–±—Ä –º–∏—Å—Ç": "üñåÔ∏è", "–û—Å–Ω –∑–¥": "üçé", "–ü–∏—Å—å–º–æ": "‚úçÔ∏è", "–ü—Ä–∏—Ä–æ–¥–æ–∑–Ω.": "üå±", "–ü—ñ–¥–ø—Ä —ñ —Ñ—ñ–Ω.": "üíº", "–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó": "üõ†Ô∏è", "–£–∫—Ä –ª—ñ—Ç": "üìö", "–£–∫—Ä –º–æ–≤–∞": "üñãÔ∏è", "–§—ñ–∑-—Ä–∞": "üèÉ", "–§—ñ–∑–∏–∫–∞": "‚öõÔ∏è", "–•—ñ–º—ñ—è": "üß™", "–Ø–î–°": "üîç"};

      const escapeHtml = (value) =>
        String(value)
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#39;");

      const splitSubjects = (raw) => {
        const clean = String(raw || "").trim();
        if (!clean) return [];

        return clean
          .split("/")
          .map((part) => part.trim())
          .filter(Boolean)
          .map((label) => ({
            label,
            canonical: label,
            icon: subjectIcons[label] || "üìò"
          }));
      };

      const daySearch = document.getElementById("daySearch");
      daySearch.innerHTML =
        '<option value="">–£—Å—ñ –¥–Ω—ñ</option>' +
        dayOrder.map((day) => `<option value="${escapeHtml(day.label)}">${escapeHtml(day.label)}</option>`).join("");

      const subjects = Array.from(
        new Set(
          Object.values(tableData).flatMap((dayMap) =>
            Object.values(dayMap).flatMap((cell) => splitSubjects(cell).map((s) => s.canonical))
          )
        )
      ).sort((a, b) => a.localeCompare(b, "uk"));

      const subjectSearch = document.getElementById("subjectSearch");
      subjectSearch.innerHTML =
        '<option value="">–£—Å—ñ –ø—Ä–µ–¥–º–µ—Ç–∏</option>' +
        subjects
          .map((subject) => `<option value="${escapeHtml(subject)}">${subjectIcons[subject] || "üìò"} ${escapeHtml(subject)}</option>`)
          .join("");

      const headRow = document.getElementById("headRow");
      headRow.innerHTML =
        `<th>‚Ññ</th>` +
        dayOrder.map((day) => `<th data-day="${escapeHtml(day.label)}">${escapeHtml(day.label)}</th>`).join("");

      const bodyRows = document.getElementById("bodyRows");
      bodyRows.innerHTML = lessons
        .map((lesson) => {
          const dayCells = dayOrder
            .map((day) => {
              const value = tableData[day.label]?.[lesson] || "";
              const pieces = splitSubjects(value);

              if (!pieces.length) {
                return `<td data-day="${escapeHtml(day.label)}"><span class="empty">-</span></td>`;
              }

              const chips = pieces
                .map(
                  (subject) =>
                    `<button class="subject-chip" data-subject="${escapeHtml(subject.canonical)}" type="button">` +
                    `<span>${escapeHtml(subject.icon)}</span>` +
                    `<span>${escapeHtml(subject.label)}</span>` +
                    `</button>`
                )
                .join('<span class="divider">/</span>');

              return `<td data-day="${escapeHtml(day.label)}"><div class="subject-stack">${chips}</div></td>`;
            })
            .join("");

          return `<tr><th>${lesson}</th>${dayCells}</tr>`;
        })
        .join("");

      let activeSubject = "";

      const clearHighlight = () => {
        activeSubject = "";
        document.querySelectorAll(".subject-chip").forEach((chip) => chip.classList.remove("is-active"));
        document.querySelectorAll("td.is-match").forEach((cell) => cell.classList.remove("is-match"));
      };

      const applyFilters = () => {
        const selectedSubject = subjectSearch.value;
        const selectedDay = daySearch.value;

        document.querySelectorAll("thead th[data-day]").forEach((headerCell) => {
          const hidden = Boolean(selectedDay) && headerCell.dataset.day !== selectedDay;
          headerCell.style.display = hidden ? "none" : "";
        });

        document.querySelectorAll("tbody tr").forEach((row) => {
          row.querySelectorAll("td[data-day]").forEach((cell) => {
            const hiddenByDay = Boolean(selectedDay) && cell.dataset.day !== selectedDay;
            cell.style.display = hiddenByDay ? "none" : "";

            if (hiddenByDay) return;

            const chips = Array.from(cell.querySelectorAll(".subject-chip"));
            const matchedBySubject = !selectedSubject || chips.some((chip) => chip.dataset.subject === selectedSubject);
            cell.classList.toggle("is-dim", !matchedBySubject && chips.length > 0);
          });
        });
      };

      document.addEventListener("click", (event) => {
        const chip = event.target.closest(".subject-chip");
        if (!chip) return;

        const subject = chip.dataset.subject || "";
        if (activeSubject === subject) {
          clearHighlight();
          return;
        }

        clearHighlight();
        activeSubject = subject;

        document.querySelectorAll("tbody td[data-day]").forEach((cell) => {
          const chips = Array.from(cell.querySelectorAll(".subject-chip"));
          const matched = chips.some((c) => c.dataset.subject === subject);
          cell.classList.toggle("is-match", matched);
          chips.forEach((c) => c.classList.toggle("is-active", c.dataset.subject === subject));
        });
      });

      subjectSearch.addEventListener("change", applyFilters);
      daySearch.addEventListener("change", applyFilters);
      document.getElementById("printButton").addEventListener("click", () => window.print());

      applyFilters();
    </script>
  </body>
</html>
